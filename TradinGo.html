<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initital- scale=1">
    <title>
     TradinGo | Ormoc   
    </title>
    <link rel="stylesheet" href="style.css">
    <div class="header">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
</head>
<body>
<!--- header ni boy --->
<div class="container">
<div class="navbar">
    <div>
        <!---logo put maya here --->
        <img src="images/LogoForNavBar.png"  width="125px" >
    </div>
    <nav>
        <ul id="MenuItems">
            <li><a href="TradinGo.html">Home</a></li>
            <li><a href="products.html">Products</a></li>
           <li><a href="chats/index.html">Account</a></li>
          
            <li><a href="about.html">About</a></li>
        </ul>
    </nav>
    <div class="carticonPad">
    <img id="TradeIcon" src="images/cartIcon.png" width="40px" height="40px">
</div>
<i id="BellIcon" class="fa fa-bell" style="font-size:24px"></i>
<img src="images/menu.png" class="menu-icon" onclick="menutoggle()">
 </div>
 <div class="row">
    <div class="col-2">
        <h1>TradinGo<br>Ormoc city's<br>Hub</h1>
        <p>
            Trade locally<br>Buy locally<br>With TradinGo
        </p>
        <a href="products.html" class="btn">Explore now &#8594;</a>
    </div>
    <div class="col-2">
     <img src="images/head.png">
    </div>  
 </div>
</div>
</div>
<style>
    #productsDiv{
        display: flex;
        flex-wrap: wrap;
        padding-left: 160px;
    }
    
        .productcard{
            border: 1px black solid;
            height: 570px;
            width: 290px;
            margin: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-direction: column;
            border-radius: 10px;
            transition: border-color .3s;
            padding: 10px;
        }
        .productcard:hover{
            border-color: rgb(233, 68, 68);
        }
        .thumb{
            width: 260px;
            height: 160px;
            cursor: pointer;
        }
        .detbtns{
            background-color: rgb(233, 68, 68);
            color: black;
            margin-bottom: 15px;
        }
        .detbtns:hover{
            background-color: wheat;
        }
        .title{
            font-size: 16;
            font-weight: bold;
            cursor: pointer;
            padding-left: 5px;
            width: 100%;
            padding-right: 5px;
            text-align: center; 
    }
    .points{
        align-self: flex-start;
        word-wrap: break-word;
        height: 192px;
    }
    </style>
<!-- tradeable --->
<h2 class="title">Tradeable Products</h2>
</div>
<div id="productsDiv" class="container">
     



</div>
<!--offers-->
<div class="offer">
    <div class="small-container">
        <div class="row">
            <div class="col-2">
<img src="images/Exclusive-item.webp" class="offer-img">
            </div>
            <div class="col-2">
<p>Exclusively on TradinGo</p>
<h1>Limited Diamond watch</h1>
<small>A diamond watch is more than just a timepiece it's a piece of beautiful jewelry. It's a perfect gift for many occasions, such as a wedding. Top models from Audemars Piguet or Hublot feature cases, bezels, and bracelets fully covered in diamonds</small>
<br>
<h2> &#128994; Products is still available trade now!</h2>
</div>
        </div>
    </div>
</div>
</div>

<!--
<div class="testimonial">
    <div class="small-container">
    <div class="row">
        <div class="col-3">
            <i class="fa fa-quote-left" aria-hidden="true"></i>
            <p>Quality product but would only reccomend buying if you have the cash because of
                how expensive it is. But the value and sentiment it holds is unrivaled and 
                worth the cost.
            </p>
            <div class="rating">
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
            </div>
            <img src="images/boy_mema.jpg">
            <h3>James Denoy</h3>
        </div>
        <div class="col-3">
            <i class="fa fa-quote-left" aria-hidden="true"></i>
            <p>Quality product but would only reccomend buying if you have the cash because of
                how expensive it is. But the value and sentiment it holds is unrivaled and 
                worth the cost.
            </p>
            <div class="rating">
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>   
            </div>
            <img src="images/user-2.jpg">
            <h3>Angry Pete</h3>
        </div>
        <div class="col-3">
            <i class="fa fa-quote-left" aria-hidden="true"></i>
            <p>Quality product but would only reccomend buying if you have the cash because of
                how expensive it is. But the value and sentiment it holds is unrivaled and 
                worth the cost.
            </p>
            <div class="rating">
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
                <i class="fa fa-star" aria-hidden="true"></i>
            </div>
            <img src="images/user-1.jpg">
            <h3>Sleeping Jaden</h3>
        </div>
    </div>
</div>
</div>
--> 
<!--
<div class="brands">
        <div class="small-container">
            <div class="row">
                <div class="col-5">
                    <img src="images/logo-godrej.png">
                </div>
                <div class="col-5">
                    <img src="images/logo-oppo.png">
                </div>
                <div class="col-5">
                    <img src="images/logo-coca-cola.png">
                </div>
                <div class="col-5">
                    <img src="images/logo-paypal.png">
                </div>
                <div class="col-5">
                    <img src="images/logo-philips.png">
                </div>
            </div>
        </div>
</div>
-->

<!--footer-->
<div class="footer">
    <div class="container">
        <div class="row">
            <div class="footer-col-1">
                <h3>Download our app</h3>
                <p>Download our app now available on android.</p>
                <div class="app-logo">
                    <img src="images/play-store.png">
                </div>
            </div>
            <div class="footer-col-2">
                <img src="images/FooterI_log.png">
                <p>Our purpose is to provide a platform for the citizens of Ormoc city to be able to trade and shop locally.</p>
            </div>
            <div class="footer-col-3">
                <h3>Useful links</h3>
               <ul>
                <li>Coupons</li>
                <li>Blog Post</li>
                <li>Retrun Policy</li>
                <li>Join Affiliate</li>
               </ul>
            </div>
            <div class="footer-col-4">
                <h3>Follow us on</h3>
               <ul>
                <li>Facebook</li>
                <li>Instagram</li>
                <li>Twitter</li>
                <li>Youtube</li>
               </ul>
            </div>
        </div>
        <hr>
        <p class="copyright">Copyright 2022 - TradinGo</p>
    </div>
</div>

<!--Toggle for js menu shits-->
<script>
    var MenuItems = document.getElementById("MenuItems");

    MenuItems.style.maxHeight = "0px";

    function menutoggle(){
        if(MenuItems.style.maxHeight == "0px"){
            MenuItems.style.maxHeight = "200px";
        }
        else{
            MenuItems.style.maxHeight = "0px";
        }
    }
</script>

<script type="module">

    function getShortTitle(title){
        if(title.length > 49) title.substring(0, 47);
        else return title;
        return title + "...";
    }

//imports
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";

const firebaseConfig = {
    apiKey: "AIzaSyB9XhRzkpjkyuAZLaMSxaLQJs7DwwNESmY",
    authDomain: "tradingo-824d6.firebaseapp.com",
    databaseURL: "https://tradingo-824d6-default-rtdb.firebaseio.com",
    projectId: "tradingo-824d6",
    storageBucket: "tradingo-824d6.appspot.com",
    messagingSenderId: "273813724823",
    appId: "1:273813724823:web:5af639aa92782227fe53d2",
    measurementId: "G-K74SN99P90"
  };

  const app = initializeApp(firebaseConfig);

  import { getDatabase, set, ref, child, get}
   from "https://www.gstatic.com/firebasejs/9.13.0/firebase-database.js";

   import { getAuth, signInWithEmailAndPassword,  signOut, updateProfile, sendSignInLinkToEmail, onAuthStateChanged }
   from "https://www.gstatic.com/firebasejs/9.13.0/firebase-auth.js";

   const realdb = getDatabase();
   const auth = getAuth(app);

var OuterDiv = document.getElementById('productsDiv');
var ArrayOfProducts = [];
window.addEventListener('load', GetAllProducts);

function GetAllProducts() {

    const dbref = ref(realdb);

    get(child(dbref,"Products/"))
    .then((snapshot) =>{
        snapshot.forEach(prod =>{
ArrayOfProducts.push(prod.val());
        });

        AddAllProducts();
    })
}

document.getElementById('TradeIcon').addEventListener('click', function() {
 
 onAuthStateChanged(auth, (user) => {
 if (user  == null) {
   window.location = 'chats/index.html';
 } else {
  window.location = 'Transactions.html';
 }
});
});


document.getElementById('BellIcon').addEventListener('click', function() {
 onAuthStateChanged(auth, (user) => {
 if (user  == null) {
   window.location = 'chats/index.html';
 } else {
  window.location = 'Notifications.html';
 }
});
});


function AddAllProducts(){
    let i = 0;

    ArrayOfProducts.forEach(prod =>{
AddAProduct(prod, i++);
    });
    AssignAllEvents();
}

function AddAProduct(product, index){
    let html = 
    `
    <img src="`+ product.LinksOfImgsArray[0] +`" class="thumb mt-2" id="thumb-`+ index +`">
        <p class="title" id="title-`+ index+`"> `+ getShortTitle(product.ProductTitle) +` </p>
       `+ 
       
       GenerateStockLabel(product.Stock)

       +
       `
        <h5 class="price">Market Value â‚±`+ product.Price +` </h5>
        <button class="detbtns btn" id="detbtn-`+ index +`">View details</button>
    `

    let newProd = document.createElement("div");
    newProd.classList.add('productcard');
    newProd.innerHTML = html;
    OuterDiv.append(newProd);

}

function GenerateStockLabel(stock){
let stocklabel = document.createElement('h5');
stocklabel.classList.add('stock');

if (stock > 0){
    stocklabel.innerHTML='In stock';
    stocklabel.classList.add('text-success');
}
else{
    stocklabel.innerHTML='Out of stock';
    stocklabel.classList.add('text-warning');
}
return stocklabel.outerHTML;
}

function GetProductIndex(id){
    var indstart = id.indexOf('-') + 1;
    var indend = id.length;
    return Number(id.substring(indstart, indend));
}

function GoToProductDetails(event){
var index = GetProductIndex(event.target.id);
localStorage.Product = JSON.stringify(ArrayOfProducts[index]);
window.location = "products-details.html";
}

function AssignAllEvents(){
    var btns = document.getElementsByClassName("detbtns");
    var titles = document.getElementsByClassName("title");
    var thumbs = document.getElementsByClassName("thumb");
 
for (let i = 0; i < btns.length; i++){
    btns[i].addEventListener('click', GoToProductDetails);
    titles[i].addEventListener('click', GoToProductDetails);
    thumbs[i].addEventListener('click', GoToProductDetails);
}
}
</script>


</body>
</html>
